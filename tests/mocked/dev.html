<html>
  <head>
    <meta charset='utf-8'/>
    <title>OAE Widget Development</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' href='../../shared/oae/css/oae.core.css'/>
    <style id='widget-style'></style>
  </head>
  <body style='display:block'>
    <div class='row'>
      <h3>Widget Under Test:<span class='pull-right'><button id='reload' class='btn btn-small' title='Restart Widget'><i class='icon-refresh' style='font-size:1.2em;'></i></button>&nbsp;</span></h3>
      <div id='widget-container'></div>
    </div>
    <hr/>
    <div class='row'>
      <div class='well well-large' id='dev-controls'></div>
    </div>
    <script id='template' type='text/ractive'>
        <h3>Configuration:
          <span class='pull-right' style='display:inline-block; vertical-align:bottom'>
            <button on-click='store' class='btn btn-small' title='Save Configuration to Local Storage'>
              <i class='icon-download-alt' style='font-size:1.2em;'></i>
            </button>
            {{#saved}}
            <button on-click='load' class='btn btn-small' title='Load Configuration from Local Storage'>
              <i class='icon-upload-alt' style='font-size:1.2em;'></i>
            </button>
            <button on-click='clear' class='btn btn-small' title='Clear Configuration in Local Storage'>
              <i class='icon-remove' style='font-size:1.2em;'></i>
            </button>
            {{/saved}}
            &nbsp;
          </span>
        </h3>
        <h4>Widget Configuration</h4>
          <form>
            <div class="span6">
              <label>showSettings:</label>
              <textarea id='settings' rows='6' class='span6' value='{{JSON.stringify(showSettings)}}' on-change='changeConfig'></textarea>
            </div>
            <div class="span6">
              <label>widgetData:</label>
              <textarea id='data' rows='6' class='span6' value='{{JSON.stringify(widgetData)}}' on-change='changeConfig'></textarea>
            </div>
            <div class='clearfix'></div>
            {{#newconfig}}
              <button type='button' class='btn btn-primary' on-click='reload'>Reload Widget</button>
              <em>(Changes do not go into effect until widget is reloaded.)</em>
            {{/newconfig}}
         </form>
        <h4>API Mocks</h4>
        <table class='table'>
          <thead>
            <tr>
              <th>Active</th>
              <th>Method</th>
              <th>URL</th>
              <th>Response</th>
              <th>Headers</th>
              <th>Content</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {{#mocks:idx}}
              <tr class='{{^active}}muted{{/active}}'>
                <td><input type='checkbox' checked='{{active}}' on-click='toggle'></td>
                <td>{{method}}</td>
                <td>{{url}}</td>
                <td>{{response[0]}}</td>
                <td>{{JSON.stringify(response[1])}}</td>
                <td>{{response[2]}}</td>
                <td><span class='pull-right'><button type='button' class='btn btn-danger' on-click='remove'>Delete</button></span></td>
              </tr>
            {{/mocks}}
          </tbody>
        </table>
        <form>
          {{#editing}}
          <label>Method:</label>
          <select value='{{method}}'>
          {{#methods}}
            <option value='{{.}}'>{{.}}</option>
          {{/methods}}
          </select>
          <label>URL:</label>
          <input type='text' class='span8' placeholder='URL to mock…' value='{{url}}'>
          <label>Response Status Code:</label>
          <input type='text' placeholder='Number…' value='{{status}}'>
          <label>Response Headers:</label>
          <textarea rows='3' class='span8' value='{{headers}}'></textarea>
          <label>Response Data:</label>
          <textarea rows='6' class='span8' value='{{response}}'></textarea>
          <div class='clearfix'></div>
          <button type='button' class='btn btn-default' on-click='cancel'>Cancel</button>
          <button type='button' class='btn btn-primary' on-click='add'>Add Mock</button>
          {{/editing}}
          {{^editing}}<button type='button' class='btn btn-default' on-click='new'>New Mock</button>{{/editing}}
          {{^editing}}
            {{#dirty}}
              <button type='button' class='btn btn-primary' on-click='update'>Update Server</button>
              <em>(Changes do not go into effect until server is updated.)</em>
            {{/dirty}}
          {{/editing}}
        </form>
    </script>
    <script data-main='dev.js' src='../../shared/vendor/js/requirejs/require-jquery.js'></script>
   </body>
</html>